<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 1</title>
</head>

<body>
    <script>
        const monedas = [200, 100, 50, 20, 10, 5, 2, 1];
        let cantidad;
        let arrayResultado;
        let cadenaResultado
        do {

            cantidad = pedirCantidad();
            if (cantidad == "FIN" || cantidad == "fin") {
                break;
            }
            arrayResultado = pasoAMonedas(cantidad);
            cadenaResultado = toString(cantidad, arrayResultado);
            console.log(cadenaResultado);
        } while (true)




        function pedirCantidad() {
            let correcto = false;
            let resultado;
            do {
                resultado = prompt("¿Qué cantidad desea convertir?");
                if (resultado.includes(",")) {
                    resultado = resultado.replace(",", ".");
                }

                if (isNaN(resultado)) {
                    if (resultado == 'FIN' || resultado == 'fin') {
                        break;
                    }
                     else {
                        alert("Debe introducirse un numero");
                    }

                }else if(resultado <= 0){
                    alert("Debe introducirse un numero mayor de 0");
                }
                 else {
                    correcto = true;
                }
            } while (!correcto)

            return resultado;
        }

        function pasoAMonedas(cantidad) {
            let resultado = new Array();
            let cantidadRestante =Math.round(cantidad * 100);
            console.log(cantidadRestante)
            for (let i = 0; i < monedas.length; i++) {
                resultado.push(Math.trunc(cantidadRestante / monedas[i]));
                cantidadRestante = cantidadRestante % monedas[i];
                console.log(cantidadRestante);

            }
            return resultado;
        }

        function toString(cantidad, arrayResultado) {
            let resultado = cantidad + " euros son "
            for (let i = 0; i < monedas.length; i++) {
                if (arrayResultado[i] > 0) {
                    resultado += arrayResultado[i] + " x " + (monedas[i] == 200 ? " 2 euros " : (monedas[i] == 100) ? "1 euro" : (monedas[i] > 1) ? monedas[i] + " céntimos" : " 1 céntimo") + " ";
                }
            }
            return resultado;
        }
    </script>

</body>

</html>